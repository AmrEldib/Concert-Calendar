<!DOCTYPE html>
<html>
	<head>
		<title>Toronto Concert Calendar</title>
		<script type='text/javascript' src='http://localhost/tablesorter/jquery-latest.js'></script>
		<script type='text/javascript' src='http://localhost/tablesorter/jquery.tablesorter.js'></script>
		<link rel="stylesheet" href="css/table.css" type="text/css"/>
		<link rel="stylesheet" href="css/list.css" type="text/css"/>		
	</head>
	<body>
		<script>
			function kimonoCallback(data) {
				console.log("callback");
				var table = document.getElementById("tableBody");
				var results = data.results;
				var collection1 = results.collection1;
				for (index=1;index<100;index++) {
					var event = collection1[index];
					var tr = document.createElement("TR");
					var newcell1 = tr.insertCell(-1);
					var newcell2 = tr.insertCell(-1);
					var newcell3 = tr.insertCell(-1);
					var newcell4 = tr.insertCell(-1);
					newcell1.innerHTML=event.artist;
					newcell1.className = "artist";
					newcell2.innerHTML=event.venue;
					newcell2.className = "venue";
					newcell3.innerHTML=event.date;
					newcell3.className = "date";
					newcell4.innerHTML=event.price;
					newcell4.className = "price";
					table.appendChild(tr);
				}				
			}
		</script>
		<div id="s">
			<input class="search" placeholder="Search" />			
			<table id='myTable' class='tablesorter'>
			<!-- You must include THEAD and TBODY tags (<th> tags in head are necessary) -->
				<thead>
					<tr>
						<th><u><strong>ARTIST</strong></u></th>
						<th><u><strong>VENUE</strong></u></th>
						<th><u><strong>DATE</strong></u></th>
						<th><u><strong>PRICE</strong></u></th>
					</tr>
				</thead>
				<!-- IMPORTANT, class="list" have to be at tbody -->
				<tbody id="tableBody" class="list">					
				</tbody>
			</table>
		</div>
		<script type="text/javascript" src="http://listjs.com/no-cdn/list.js"></script>		
		<!-- need to load filter.js at end of file and after list.js -->
		<!-- <script type="text/javascript" src="js/filter.js"></script>  -->
		<script>
			$(document).ready(function() {
					console.log('ready');				

					
					$.ajax({
						"url":"https://www.kimonolabs.com/api/69auren6?apikey=dHMljbNpnmzYGGsQ7XfqOeIoxw9zGGQI&callback=kimonoCallback",
						"crossDomain":true,
						"dataType":"jsonp"
					});
					
					console.log("calling");
					
					$("#myTable").tablesorter();
				} 
			);
		</script>
		<script>
			var options = {
			  valueNames: [ 'artist', 'venue', 'date', 'price' ]
			};
			var userList = new List('s', options);
		</script>
	</body>
</html>